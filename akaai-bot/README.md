# ü§ñ akaAI Telegram Bot

Telegram –±–æ—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Qaraa CRM —Å–∏—Å—Ç–µ–º–æ–π. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É —á–µ—Ä–µ–∑ Telegram, –∞ –≤–ª–∞–¥–µ–ª—å—Ü—É - –æ—Ç–≤–µ—á–∞—Ç—å –ø—Ä—è–º–æ –∏–∑ Telegram.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd akaai-bot
npm install
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `setup.sql` –≤ SQL Editor –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞.

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ Vercel Dashboard):

```env
TELEGRAM_TOKEN=8363449094:AAHpdTNzz4mdtG49_2ldhx_uT3WTzeoz7xA
OWNER_CHAT_ID=996317285
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key
```

### 4. –î–µ–ø–ª–æ–π –Ω–∞ Vercel

```bash
vercel --prod
```

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ:
- **Root Directory**: –≤—ã–±–µ—Ä–∏—Ç–µ `akaai-bot`
- –î–æ–±–∞–≤—å—Ç–µ Environment Variables –≤ Vercel Dashboard

### 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Webhook

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
curl -X POST "https://api.telegram.org/bot8363449094:AAHpdTNzz4mdtG49_2ldhx_uT3WTzeoz7xA/setWebhook?url=https://your-bot.vercel.app/api/webhook"
```

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –î–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤:

1. –ü—Ä–æ–¥–∞–≤–µ—Ü –ø–∏—à–µ—Ç –±–æ—Ç—É `/start`
2. –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ `chat_id`
3. –í–ª–∞–¥–µ–ª–µ—Ü –¥–æ–±–∞–≤–ª—è–µ—Ç `chat_id` –≤ —Ç–∞–±–ª–∏—Ü—É `login`
4. –ü—Ä–æ–¥–∞–≤–µ—Ü –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É

### –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞:

1. –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
2. –û—Ç–≤–µ—á–∞–µ—Ç —á–µ—Ä–µ–∑ "Reply" –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –û—Ç–≤–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–¥–∞–≤—Ü—É

### –í CRM (akaai.jsx):

1. –†–µ–∂–∏–º "üí¨ –°–æ–æ–±—â–µ–Ω–∏—è" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏
2. –ú–æ–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –ø—Ä—è–º–æ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
3. –°—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
akaai-bot/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ webhook.js          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Telegram webhook
‚îú‚îÄ‚îÄ package.json            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ vercel.json            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
‚îú‚îÄ‚îÄ setup.sql              # SQL —Å–∫—Ä–∏–ø—Ç
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `telegram_messages`

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | SERIAL | ID —Å–æ–æ–±—â–µ–Ω–∏—è |
| from_user_id | TEXT | Telegram chat_id –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è |
| from_username | TEXT | Username –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è |
| to_user_id | TEXT | Telegram chat_id –ø–æ–ª—É—á–∞—Ç–µ–ª—è |
| message | TEXT | –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è |
| timestamp | TIMESTAMP | –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ |
| read | BOOLEAN | –ü—Ä–æ—á–∏—Ç–∞–Ω–æ –ª–∏ |

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Vercel Serverless Functions
- **Runtime**: Node.js 14+
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Supabase (PostgreSQL)
- **API**: Telegram Bot API

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

